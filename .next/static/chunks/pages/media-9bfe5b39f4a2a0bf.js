(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{4482:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/media",function(){return t(3338)}])},3338:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return y}});var a=t(5893),l=t(7294),s=t(2917),d=t(9879),r=t(4712),n=t(9549),c=t(7648),x=t(3135),m=t(1635),o=t(6005),u=function(e){let{id:i,imageTitle:t,altText:l,setImageTitleState:s}=e,{mutate:u,isPending:h}=(0,n.Z)({path:"/media/edit/".concat(i),revalidate:"/media"});return(0,a.jsx)("div",{children:(0,a.jsx)(d.J9,{initialValues:{imageTitle:t||"",altText:l||""},onSubmit:e=>{u(e,{onSuccess:()=>{r.A.success("Image details changed"),s(e.imageTitle)}})},enableReinitialize:!0,children:e=>{let{isSubmitting:i}=e;return(0,a.jsxs)(d.l0,{className:"space-y-5",children:[(0,a.jsx)(x.U,{label:"Image Title:",placeholder:"Your text here",name:"imageTitle",type:"text",required:!0}),(0,a.jsx)(m.X,{label:"Alt Text",placeholder:"Your text here",name:"altText",required:!0}),(0,a.jsxs)("div",{className:"mt-5 flex items-center gap-3",children:[(0,a.jsx)(c.Z,{type:"submit",className:"px-8",disabled:h,children:"Save"}),h&&(0,a.jsx)(o.$,{className:"border-gray-400 border-r-gray-400/30 border-b-gray-400/30"})]})]})}})})};let h=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});var p=t(4522),g=t(5675),j=t.n(g),b=function(e){let{selectedImage:i}=e,t=(0,l.useRef)(),[s,d]=(0,l.useState)(null),[r,n]=(0,l.useState)(i.imageTitle);return(0,a.jsxs)(p.x,{className:"h-screen w-[400px] 2xl:w-[625px]",children:[(0,a.jsxs)("div",{className:"pt-4 p-5 2xl:p-7 border-b border-gray-300",children:[(0,a.jsx)("p",{className:"text-[20px] font-medium text-gray-600",children:"Image Details"}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-5",children:[(0,a.jsx)("div",{className:"max-w-[200px] 2xl:max-w-[320px] max-h-[380px] overflow-hidden",children:(0,a.jsx)(j(),{height:null==s?void 0:s.height,width:null==s?void 0:s.width,ref:t,src:i.image.url,alt:i.altText,onLoad:()=>{let{naturalWidth:e,naturalHeight:i}=t.current;d({width:e,height:i})}},i._id)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 leading-6",children:[(0,a.jsx)("p",{className:"font-semibold",children:r}),(0,a.jsx)("p",{children:h(i.createdAt)}),(0,a.jsxs)("p",{children:[null==s?void 0:s.width," x ",null==s?void 0:s.height]})]})]})]}),(0,a.jsx)("div",{className:"p-5 2xl:p-7 pb-[140px] w-[80%]",children:(0,a.jsx)(u,{id:i._id,imageTitle:i.imageTitle,altText:i.altText,setImageTitleState:n},i._id)})]})},f=t(4290),v=function(e){let{media:i,selectedId:t,handleImageClick:l}=e;return(0,a.jsxs)("div",{className:"relative size-[180px] 2xl:size-[282px] rounded-md overflow-hidden cursor-pointer",onClick:()=>l(i),children:[(0,a.jsx)(j(),{src:i.image.url,alt:i.altText,sizes:"282px",fill:!0,className:"object-cover  border border-gray-200 rounded-md"}),t===i._id&&(0,a.jsx)("div",{className:"absolute inset-0 border-[6px] border-cyan-400 rounded-md",children:(0,a.jsx)("div",{className:"absolute top-0 right-0 size-6 flex justify-center items-center bg-cyan-400 border border-white text-white",children:(0,a.jsx)(f.CD,{})})})]})},N=t(2882),w=t(3163),y=function(){let[e,i]=(0,l.useState)(null),{data:t,isPending:d}=(0,w.Z)({path:"/media"}),c=t=>{(null==e?void 0:e._id)===t._id?i(null):i(t)},[x,m]=(0,l.useState)(!1),{mutate:o,isPending:u}=(0,n.Z)({path:"/media",revalidate:"/media"});return(0,a.jsx)(s.Z,{title:"Media",description:"media",heading:"All Media",isLoading:d,children:(0,a.jsxs)("div",{className:"mt-5 border border-gray-300 rounded-xl flex min-h-[420px] 2xl:min-h-[700px]",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-5 2xl:gap-7 p-5 2xl:p-7",children:[(0,a.jsx)(N.Z,{handleImageSubmit:(e,i)=>{o(e,{onSuccess:()=>{r.A.success("Media added"),i.resetForm()},onSettled:()=>{m(!1)}})},showImageModal:x,setShowImageModal:m,imageSubmitting:u,children:(0,a.jsx)("button",{type:"button",className:"size-[180px] 2xl:size-[280px] rounded-md border-gray-400 bg-gray-100 flex justify-center items-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[(0,a.jsx)("span",{children:(0,a.jsx)(f._t,{})}),(0,a.jsx)("p",{children:"Upload Image"})]})})}),null==t?void 0:t.media.map(i=>(0,a.jsx)(v,{media:i,selectedId:null==e?void 0:e._id,handleImageClick:c},i._id))]}),e&&(0,a.jsx)("div",{className:"sticky top-0 border-l border-gray-300",children:(0,a.jsx)(b,{selectedImage:e},e._id)})]})})}}},function(e){e.O(0,[914,512,194,342,891,888,774,179],function(){return e(e.s=4482)}),_N_E=e.O()}]);